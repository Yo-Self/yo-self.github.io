"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[292],{3292:function(e,t,a){a.r(t),a.d(t,{default:function(){return x}});var s=a(7437),r=a(2265),n=a(8783),l=a(665),i=a(9493);function o(e){let{dishes:t,onDishClick:a}=e;return t&&0!==t.length?(0,s.jsxs)("div",{className:"mt-3 space-y-2",children:[(0,s.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:"\uD83C\uDF7D️ Pratos recomendados:"}),(0,s.jsx)("div",{className:"grid grid-cols-1 gap-1",children:t.map((e,t)=>(0,s.jsx)(c,{dish:e,onDishClick:a,index:t},"".concat(e.name,"-").concat(t)))})]}):null}function c(e){let{dish:t,onDishClick:a,index:r=0}=e,{elementRef:n,isVisible:o}=(0,l.$)({threshold:.1,rootMargin:"0px 0px -50px 0px",triggerOnce:!0}),c=i.j.hasRequiredComplementsWithPrice(t);return(0,s.jsx)("div",{ref:n,className:"transform transition-all duration-500 ease-out hover:shadow-lg cursor-pointer ".concat(o?"opacity-100 translate-x-0":"opacity-0 translate-x-4"),style:{},onClick:()=>a(t),children:(0,s.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)("div",{className:"w-20 h-20 flex-shrink-0",children:(0,s.jsx)("img",{src:t.image,alt:t.name,className:"w-full h-full object-cover"})}),(0,s.jsxs)("div",{className:"flex-1 p-3",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsx)("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white line-clamp-1",children:t.name}),(0,s.jsxs)("div",{className:"text-right ml-2",children:[c&&(0,s.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"a partir"}),(0,s.jsxs)("div",{className:"text-sm font-bold text-primary dark:text-cyan-500",children:["R$ ",t.price]})]})]}),(0,s.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1 line-clamp-2",children:t.description}),t.tags&&t.tags.length>0&&(0,s.jsx)("span",{className:"inline-block mt-1 text-xs bg-primary/10 dark:bg-cyan-500/10 text-primary dark:text-cyan-500 px-2 py-0.5 rounded-full",children:t.tags[0]})]})]})})})}function d(e){let{dishes:t,onDishClick:a}=e;return(0,s.jsx)(o,{dishes:t,onDishClick:a})}function u(e){let{isVisible:t,onClose:a}=e,[n,l]=(0,r.useState)(!0);return((0,r.useEffect)(()=>{l("speechSynthesis"in window)},[]),t)?(0,s.jsx)("div",{className:"fixed inset-0 z-[400] flex items-center justify-center bg-black/50 backdrop-blur-sm",children:(0,s.jsx)("div",{className:"w-full max-w-md bg-white dark:bg-gray-900 rounded-2xl shadow-2xl p-6 mx-4",children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:n?(0,s.jsx)("div",{className:"w-10 h-10 rounded-full bg-green-100 dark:bg-green-900 flex items-center justify-center",children:(0,s.jsx)("svg",{className:"w-6 h-6 text-green-600 dark:text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"})})}):(0,s.jsx)("div",{className:"w-10 h-10 rounded-full bg-yellow-100 dark:bg-yellow-900 flex items-center justify-center",children:(0,s.jsx)("svg",{className:"w-6 h-6 text-yellow-600 dark:text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:n?"Funcionalidade de Voz Ativada!":"Funcionalidade de Voz N\xe3o Suportada"}),(0,s.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:n?(0,s.jsx)(s.Fragment,{children:"Agora voc\xea pode ativar a leitura autom\xe1tica das respostas do chatbot. As mensagens ser\xe3o lidas em voz alta automaticamente quando voc\xea receber uma resposta."}):(0,s.jsx)(s.Fragment,{children:"Seu navegador n\xe3o suporta a funcionalidade de s\xedntese de fala. Para usar esta funcionalidade, atualize para um navegador mais recente."})}),n&&(0,s.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3 mb-4",children:[(0,s.jsx)("h4",{className:"text-sm font-medium text-blue-900 dark:text-blue-100 mb-2",children:"Como usar:"}),(0,s.jsxs)("ul",{className:"text-xs text-blue-800 dark:text-blue-200 space-y-1",children:[(0,s.jsx)("li",{children:"• Clique no bot\xe3o \uD83D\uDD0A no header para ativar/desativar"}),(0,s.jsx)("li",{children:"• Use o bot\xe3o de configura\xe7\xf5es para escolher a voz"}),(0,s.jsx)("li",{children:"• Clique no \xedcone \uD83D\uDD0A nas mensagens para reler"}),(0,s.jsx)("li",{children:"• A leitura \xe9 autom\xe1tica quando ativada"})]})]}),(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)("button",{onClick:a,className:"px-4 py-2 bg-cyan-500 hover:bg-cyan-600 text-white rounded-lg transition-colors text-sm font-medium",children:"Entendi"})})]})]})})}):null}var m=a(9555);function x(e){let{restaurant:t,restaurants:a,isOpen:l,onClose:i,buttonRef:o}=e,{results:c,isLoading:x,error:h,search:g,clearResults:p}=function(){let[e,t]=(0,r.useState)(null),[a,s]=(0,r.useState)(!1),[n,l]=(0,r.useState)(null);return{results:e,isLoading:a,error:n,search:(0,r.useCallback)(async(e,a,r)=>{if(e.trim()){s(!0),l(null);try{if(function(e){let t=e.toLowerCase().trim(),a=["qual","quais","como","quando","onde","por que","porque","quanto","quanta","recomende","recomenda","sugira","sugere","melhor","pior","mais","menos","popular","famoso","tradicional","especial","diferente","novo","antigo","barato","caro","econ\xf4mico","premium","vegetariano","vegano","sem gl\xfaten","apimentado","doce","salgado","quente","frio","grande","pequeno","tem","cont\xe9m","inclui","feito","preparado","cozido","assado","frito","grelhado","cru","fresco","congelado","org\xe2nico","natural","artesanal"].some(e=>t.includes(e)),s=t.endsWith("?"),r=t.split(/\s+/).length;return(r>=3||r<=2)&&!a&&!s}(e)){let s=function(e,t,a){let s=e.toLowerCase().trim(),r=[];if(null==t?void 0:t.menu_items){let e=t.menu_items.filter(e=>{let t=e.name.toLowerCase().includes(s),a=e.description.toLowerCase().includes(s),r=e.tags&&e.tags.some(e=>e.toLowerCase().includes(s)),n=e.ingredients&&e.ingredients.toLowerCase().includes(s);return t||a||r||n});r.push(...e)}return a&&a.forEach(e=>{if(e.id!==(null==t?void 0:t.id)&&e.menu_items){let t=e.menu_items.filter(e=>{let t=e.name.toLowerCase().includes(s),a=e.description.toLowerCase().includes(s),r=e.tags&&e.tags.some(e=>e.toLowerCase().includes(s)),n=e.ingredients&&e.ingredients.toLowerCase().includes(s);return t||a||r||n});r.push(...t)}}),r}(e,a,r);t({type:"search",items:s})}else{let s="https://wulazaggdihidadkhilg.supabase.co",r="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Ind1bGF6YWdnZGloaWRhZGtoaWxnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ0NzkxODQsImV4cCI6MjA3MDA1NTE4NH0.MxXnFZAUoMPCy9LJFTWv_6-X_8AmLr553wrAhoeRrOQ";if(!s||!r)throw Error("Configura\xe7\xe3o do Supabase n\xe3o encontrada.");let n=await fetch("".concat(s,"/functions/v1/ai-chat"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify({message:e,restaurantData:a,chatHistory:[]})});if(!n.ok)throw Error("Erro na comunica\xe7\xe3o com a IA");let l=await n.json();if(l.error)throw Error(l.error);let i=function(e,t){let a=(null==t?void 0:t.menu_items)||[],s=[],r=new Set,n=new Set;if(!t||!Array.isArray(a)||0===a.length)return[];let l=e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return a.forEach(e=>{if(r.has(e.id||e.name))return;let t=e.name.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").trim();!n.has(t)&&[t,t.replace(/\s+de\s+/g," de "),t.replace(/\s+De\s+/g," de "),t.replace(/\s+DE\s+/g," de "),t.replace(/\s+de\s+/g," "),t.replace(/\s+De\s+/g," "),t.replace(/\s+DE\s+/g," ")].some(e=>l.includes(e))&&(s.push(e),r.add(e.id||e.name),n.add(t))}),s}(l.message,a);t({type:"llm",message:l.message,recommendedDishes:i,model:l.model||"gemma-3-superto"})}}catch(e){l(e instanceof Error?e.message:"Erro desconhecido")}finally{s(!1)}}},[]),clearResults:(0,r.useCallback)(()=>{t(null),l(null)},[])}}(),{isEnabled:f,isSpeaking:y,toggleSpeech:b,speak:v,stop:j,clearReadHistory:w,resetStopFlag:k}=function(){let[e,t]=(0,r.useState)(()=>"true"===localStorage.getItem("speech-enabled")),[a,s]=(0,r.useState)(!1),[n,l]=(0,r.useState)(null),[i,o]=(0,r.useState)(new Set),c=(0,r.useRef)(null),d=(0,r.useRef)(!1),u="speechSynthesis"in window,m=(0,r.useCallback)(()=>{if(!u)return;let e=window.speechSynthesis.getVoices(),t=e.find(e=>e.name.toLowerCase().includes("luciana")&&(e.lang.startsWith("pt-BR")||e.lang.startsWith("pt")))||e.find(e=>e.lang.startsWith("pt-BR"))||e.find(e=>e.lang.startsWith("pt"));t&&!n&&l(t)},[u,n]);(0,r.useEffect)(()=>{u&&(m(),void 0!==window.speechSynthesis.onvoiceschanged&&(window.speechSynthesis.onvoiceschanged=m))},[u,m]);let x=(0,r.useCallback)(()=>{if(!u){console.warn("Speech synthesis n\xe3o \xe9 suportado neste navegador");return}t(e=>{let t=!e;return localStorage.setItem("speech-enabled",t.toString()),t})},[u]),h=(0,r.useCallback)(()=>{u&&(d.current=!0,window.speechSynthesis.cancel(),c.current&&(c.current=null),s(!1))},[u]),g=(0,r.useCallback)(function(t){let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!u||!t.trim()||!e&&!r||!r&&i.has(t)||a||d.current)return;window.speechSynthesis.cancel();let l=new SpeechSynthesisUtterance(t);n&&(l.voice=n),l.rate=.9,l.pitch=1,l.volume=1,l.lang=(null==n?void 0:n.lang)||"pt-BR",l.onstart=()=>{if(d.current){window.speechSynthesis.cancel();return}s(!0)},l.onend=()=>{s(!1),c.current=null,r||o(e=>new Set(e).add(t))},l.onerror=e=>{s(!1),c.current=null,"interrupted"!==e.error&&console.error("Erro na s\xedntese de fala:",e)},c.current=l,window.speechSynthesis.speak(l)},[u,e,n,i,h]);return{isEnabled:e,isSpeaking:a,toggleSpeech:x,speak:g,stop:h,clearReadHistory:(0,r.useCallback)(()=>{o(new Set)},[]),resetStopFlag:(0,r.useCallback)(()=>{d.current=!1},[])}}(),[N,C]=(0,r.useState)([]),[D,S]=(0,r.useState)(""),[L,E]=(0,r.useState)(null),[z,I]=(0,r.useState)(!1),[A,M]=(0,r.useState)(!1),[R,W]=(0,r.useState)(!1),[B,q]=(0,r.useState)(!1),[_,T]=(0,r.useState)(!1),F=(0,r.useRef)(null),H=(0,r.useRef)(null),O=(0,r.useRef)(null),V=()=>{var e;null===(e=F.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})};(0,r.useEffect)(()=>{V()},[N]),(0,r.useEffect)(()=>{l&&H.current&&setTimeout(()=>{var e;null===(e=H.current)||void 0===e||e.focus()},300)},[l]),(0,r.useEffect)(()=>{l&&k()},[l,k]),(0,r.useEffect)(()=>{l&&!localStorage.getItem("voice-notification-shown")&&setTimeout(()=>{M(!0),localStorage.setItem("voice-notification-shown","true")},1e3)},[l]),(0,n.y)(l),(0,r.useEffect)(()=>()=>{j()},[j]),(0,r.useEffect)(()=>{if(l){if(T(!0),q(!0),O.current){let e=O.current;e.style.transform="scale(0.1) translateY(100px)",e.style.opacity="0",e.offsetHeight,e.style.transition="all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94)",e.style.transform="scale(1) translateY(0)",e.style.opacity="1"}setTimeout(()=>{q(!1)},400)}else T(!1),q(!1)},[l]),(0,r.useEffect)(()=>{c&&C(e=>{if(0===e.length)return e;let t=e[e.length-1];return"user"===t.role?[...e,{id:Date.now().toString(),role:"assistant",content:"llm"===c.type?c.message||"":c.items&&c.items.length>0?"Encontrei ".concat(c.items.length,' resultado(s) para "').concat(t.content,'":'):'Nenhum resultado encontrado para "'.concat(t.content,'".'),timestamp:new Date,type:c.type,items:c.items,recommendedDishes:c.recommendedDishes,model:c.model}]:e})},[c]),(0,r.useEffect)(()=>{if(N.length>0){let e=N[N.length-1];"assistant"===e.role&&e.content&&f&&e.content&&!y&&setTimeout(()=>{v(e.content,!1)},500)}},[N,f,v,y]),(0,r.useEffect)(()=>{if(h&&N.length>0&&"user"===N[N.length-1].role){let e={id:Date.now().toString(),role:"assistant",content:"Desculpe, ocorreu um erro: ".concat(h),timestamp:new Date,type:"llm"};C(t=>[...t,e])}},[h,N]);let J=async e=>{if(e.preventDefault(),!D.trim()||x)return;let s=D.trim();S("");let r={id:Date.now().toString(),role:"user",content:s,timestamp:new Date,type:"search"};C(e=>[...e,r]),await g(s,t,a)},P=(0,r.useCallback)(e=>{E(e),I(!0)},[]),Z=e=>e.toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"}),Y=e=>e.replace(/\*([^*]+)\*/g,(e,a)=>{var s;let r=null===(s=t.menu_items)||void 0===s?void 0:s.find(e=>e.name.toLowerCase().includes(a.toLowerCase())||a.toLowerCase().includes(e.name.toLowerCase()));return r?'<span class="inline-block px-2 py-1 bg-cyan-100 dark:bg-cyan-900 text-cyan-700 dark:text-cyan-300 rounded-md cursor-pointer hover:bg-cyan-200 dark:hover:bg-cyan-800 transition-colors" onclick="window.dishClickHandler && window.dishClickHandler(\''.concat(r.name,"')\">").concat(a,"</span>"):a}),Q=(0,r.useCallback)(e=>{var a;let s=null===(a=t.menu_items)||void 0===a?void 0:a.find(t=>t.name.toLowerCase().includes(e.toLowerCase())||e.toLowerCase().includes(t.name.toLowerCase()));s&&P(s)},[t.menu_items,P]);if((0,r.useEffect)(()=>(window.dishClickHandler=Q,()=>{delete window.dishClickHandler}),[Q]),!l)return null;let X=(()=>{if(!(null==o?void 0:o.current))return{x:0,y:0};let e=o.current.getBoundingClientRect();return{x:e.left+e.width/2,y:e.top+e.height/2}})();return(0,s.jsxs)("div",{className:"fixed inset-0 z-[200] flex items-end justify-center backdrop-blur-sm transition-all duration-400 chat-backdrop ".concat(_&&B?"bg-black/0":"bg-black/50"),children:[(0,s.jsxs)("div",{ref:O,className:"w-full max-w-md bg-white dark:bg-gray-900 rounded-t-3xl shadow-2xl flex flex-col h-[80vh] max-h-[600px] transform-gpu chat-transition",style:{transformOrigin:"".concat(X.x,"px ").concat(X.y,"px")},children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700 rounded-t-3xl transition-all duration-500 delay-100 ".concat(_&&B?"opacity-0 translate-y-4":"opacity-100 translate-y-0"),children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-cyan-500 to-blue-500 flex items-center justify-center",children:(0,s.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold text-gray-900 dark:text-white",children:t.name}),(0,s.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[x?"Processando...":"Online",f&&(0,s.jsx)("span",{className:"ml-2 text-xs text-green-600 dark:text-green-400",children:"\uD83D\uDD0A Voz ativada"})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-0",children:[(0,s.jsxs)("button",{onClick:b,className:"relative inline-flex h-8 w-16 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:ring-offset-2 ".concat(f?"bg-cyan-500":"bg-gray-300 dark:bg-gray-600"),title:f?"Desativar leitura de voz":"Ativar leitura de voz",children:[(0,s.jsx)("span",{className:"absolute text-sm font-medium transition-all duration-200 ".concat(f?"left-2 text-white":"right-2 text-gray-600 dark:text-gray-400"),children:"Ler"}),(0,s.jsx)("span",{className:"inline-block h-6 w-6 transform rounded-full bg-white shadow-sm transition-transform ".concat(f?"translate-x-9":"translate-x-1"," ").concat(y?"animate-pulse":"")})]}),(0,s.jsx)("button",{onClick:()=>{C([]),p(),w()},className:"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 transition-colors",title:"Limpar conversa",children:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),(0,s.jsx)("button",{onClick:()=>{if(R)return;if(j(),W(!0),O.current){let e=O.current;e.style.transition="all 0.4s cubic-bezier(0.55, 0.055, 0.675, 0.19)",e.style.transform="scale(0.1) translateY(100px)",e.style.opacity="0"}let e=document.querySelector(".chat-backdrop");e&&e.classList.add("bg-black/0"),setTimeout(()=>{W(!1),i()},400)},className:"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 transition-colors",title:"Fechar",children:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),(0,s.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 transition-all duration-500 delay-200 ".concat(_&&B?"opacity-0 translate-y-4":"opacity-100 translate-y-0"),children:[0===N.length?(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-gradient-to-r from-cyan-500 to-blue-500 flex items-center justify-center",children:(0,s.jsx)("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Busca & IA Integrada! \uD83D\uDD0D\uD83E\uDD16"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-4",children:"Digite um ingrediente ou prato para buscar, ou fa\xe7a uma pergunta para o assistente IA."}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:"Exemplos de busca:"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2 justify-center",children:["frango","arroz","salada","sobremesa"].map(e=>(0,s.jsx)("button",{onClick:()=>{S(e),setTimeout(()=>{let e=document.querySelector("form");e&&e.dispatchEvent(new Event("submit",{cancelable:!0,bubbles:!0}))},100)},className:"px-3 py-1 text-xs bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors",children:e},e))}),(0,s.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-4",children:"Exemplos de perguntas:"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2 justify-center",children:["Qual o prato mais popular?","Recomende algo vegetariano","Tem op\xe7\xf5es sem gl\xfaten?"].map(e=>(0,s.jsx)("button",{onClick:()=>{S(e),setTimeout(()=>{let e=document.querySelector("form");e&&e.dispatchEvent(new Event("submit",{cancelable:!0,bubbles:!0}))},100)},className:"px-3 py-1 text-xs bg-cyan-100 dark:bg-cyan-900 text-cyan-700 dark:text-cyan-300 rounded-full hover:bg-cyan-200 dark:hover:bg-cyan-800 transition-colors",children:e},e))})]})]}):N.map(e=>(0,s.jsx)("div",{className:"flex ".concat("user"===e.role?"justify-end":"justify-start"),children:(0,s.jsxs)("div",{className:"max-w-[80%] rounded-2xl px-4 py-2 ".concat("user"===e.role?"bg-gradient-to-r from-cyan-500 to-blue-500 text-white":"bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-white"),children:[(0,s.jsx)("p",{className:"text-sm whitespace-pre-wrap",dangerouslySetInnerHTML:{__html:Y(e.content)}}),(0,s.jsxs)("div",{className:"flex items-center justify-between mt-1",children:[(0,s.jsx)("p",{className:"text-xs ".concat("user"===e.role?"text-cyan-100":"text-gray-500 dark:text-gray-400"),children:Z(e.timestamp)}),(0,s.jsx)("div",{className:"flex items-center gap-2",children:"assistant"===e.role&&(0,s.jsx)("button",{onClick:()=>v(e.content,!0),disabled:y,className:"text-lg text-cyan-500 hover:text-cyan-600 disabled:text-gray-400",title:"Ler mensagem",children:"\uD83D\uDD0A"})})]}),"assistant"===e.role&&"search"===e.type&&e.items&&e.items.length>0&&(0,s.jsx)("div",{className:"mt-3 space-y-2",children:e.items.map((e,a)=>(0,s.jsx)("div",{onClick:()=>P(e),children:(0,s.jsx)(m.Z,{dish:e,size:"small",fallbackImage:t.image})},a))}),"assistant"===e.role&&"llm"===e.type&&e.recommendedDishes&&e.recommendedDishes.length>0&&(0,s.jsx)(d,{dishes:e.recommendedDishes,onDishClick:P})]})},e.id)),x&&(0,s.jsx)("div",{className:"flex justify-start",children:(0,s.jsx)("div",{className:"bg-gray-100 dark:bg-gray-800 rounded-2xl px-4 py-2",children:(0,s.jsxs)("div",{className:"flex space-x-1",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),(0,s.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),(0,s.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})}),(0,s.jsx)("div",{ref:F})]}),(0,s.jsx)("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 transition-all duration-500 delay-300 ".concat(_&&B?"opacity-0 translate-y-4":"opacity-100 translate-y-0"),children:(0,s.jsxs)("form",{onSubmit:J,className:"flex gap-2",children:[(0,s.jsx)("input",{ref:H,type:"text",value:D,onChange:e=>S(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),J(e))},placeholder:"Buscar pratos ou fazer perguntas...",className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-full bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent",disabled:x}),(0,s.jsx)("button",{type:"submit",disabled:!D.trim()||x,className:"px-4 py-2 bg-gradient-to-r from-cyan-500 to-blue-500 text-white rounded-full hover:from-cyan-600 hover:to-blue-600 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 flex items-center justify-center",children:x?(0,s.jsxs)("svg",{className:"w-5 h-5 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]})})]}),z&&L&&(0,s.jsx)("div",{className:"fixed inset-0 z-[300] flex items-center justify-center bg-black/50 backdrop-blur-sm",children:(0,s.jsxs)("div",{className:"w-full max-w-md bg-white dark:bg-gray-900 rounded-2xl shadow-2xl max-h-[90vh] overflow-hidden",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("img",{src:L.image,alt:L.name,className:"w-full h-48 object-cover"}),(0,s.jsx)("button",{onClick:()=>{I(!1),E(null)},className:"absolute top-4 right-4 w-8 h-8 bg-black/50 text-white rounded-full flex items-center justify-center hover:bg-black/70 transition-colors",children:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,s.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:L.name}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("span",{className:"text-lg font-bold text-primary dark:text-cyan-500",children:["R$ ",L.price]}),L.tags&&L.tags.length>0&&(0,s.jsx)("div",{className:"flex gap-1",children:L.tags.map(e=>(0,s.jsx)("span",{className:"bg-primary dark:bg-cyan-700 text-white text-xs px-2 py-0.5 rounded-full",children:e},e))})]})]}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:L.description}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-1",children:"Ingredientes"}),(0,s.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:L.ingredients})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-1",children:"Por\xe7\xe3o"}),(0,s.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:L.portion})]}),L.allergens&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-1",children:"Alerg\xeanicos"}),(0,s.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:L.allergens})]})]})]})]})}),(0,s.jsx)(u,{isVisible:A,onClose:()=>M(!1)})]})}}}]);