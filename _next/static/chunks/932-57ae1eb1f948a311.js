"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[932],{1057:function(e,t,a){a.d(t,{Z:function(){return o},g:function(){return i}});var r=a(7437);a(2265);var n=a(5184);function o(e){let{className:t="w-6 h-6",size:a}=e;return(0,r.jsx)("img",{...a?{width:a,height:a}:{},className:t,src:"/order.svg",alt:"order","aria-hidden":"true"})}function i(){let{totalItems:e,isEmpty:t,openCart:a}=(0,n.jD)();return t?null:(0,r.jsxs)("button",{onClick:a,className:"relative flex items-center justify-center w-8 h-8 rounded-full bg-blue-500 hover:bg-blue-600 transition-colors duration-200 shadow-lg","aria-label":"Carrinho com ".concat(e," ").concat(1===e?"item":"itens"),title:"Abrir carrinho",children:[(0,r.jsx)(o,{className:"w-5 h-5 text-white"}),(0,r.jsx)("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-bold border-2 border-white animate-bounce",children:e>99?"99+":e})]})}},2530:function(e,t,a){a.d(t,{Z:function(){return l}});var r=a(7437),n=a(2265),o=a(5042),i=a(4887);function s(e){let{isOpen:t,imageSrc:a,imageAlt:o,onClose:s}=e,l=(0,n.useRef)(null);if((0,n.useEffect)(()=>{let e=e=>{"Escape"===e.key&&s()};return t&&(document.addEventListener("keydown",e),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",e),document.body.style.overflow="unset"}},[t,s]),!t)return null;let c=(0,r.jsx)("div",{ref:l,className:"fixed inset-0 z-[99999999] flex items-center justify-center bg-black/90 backdrop-blur-xl",onClick:s,style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:99999999},children:(0,r.jsxs)("div",{className:"relative max-w-[95vw] max-h-[95vh] w-auto h-auto bg-white dark:bg-gray-800 rounded-3xl shadow-2xl border-2 border-white/30 dark:border-gray-600/30 overflow-hidden",onClick:e=>e.stopPropagation(),style:{boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.5), 0 0 0 1px rgba(255, 255, 255, 0.1), inset 0 1px 0 rgba(255, 255, 255, 0.1)",position:"relative",zIndex:99999999},children:[(0,r.jsx)("button",{onClick:s,className:"absolute top-3 right-3 z-20 w-10 h-10 bg-black/60 hover:bg-black/80 text-white rounded-full flex items-center justify-center transition-all duration-200 hover:scale-110 backdrop-blur-sm border border-white/30 shadow-lg","aria-label":"Fechar visualiza\xe7\xe3o da imagem",children:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M6 18L18 6M6 6l12 12"})})}),(0,r.jsx)("div",{className:"p-2",children:(0,r.jsx)("img",{src:a,alt:o,className:"max-w-full max-h-full object-contain w-auto h-auto rounded-2xl",draggable:!1})})]})});return(0,i.createPortal)(c,document.body)}function l(e){let{src:t,alt:a,className:i="",fallbackSrc:l,onError:c,onLoad:u,children:d,clickable:m=!0}=e,[h,p]=(0,n.useState)(!0),[f,g]=(0,n.useState)(!1),[b,y]=(0,n.useState)(t),[w,C]=(0,n.useState)(!1),{isImageLoaded:I,isImageError:v,preloadImage:x}=(0,o.K)(),k=(0,n.useCallback)(async()=>{if(t){if(I(t)){p(!1),g(!1),y(t),null==u||u();return}if(v(t)){l?(y(l),g(!1),p(!0)):(p(!1),g(!0),null==c||c());return}try{if(p(!0),g(!1),y(t),await x(t))p(!1),null==u||u();else if(l){y(l),g(!1),p(!0);let e=await x(l);p(!1),e||(g(!0),null==c||c())}else p(!1),g(!0),null==c||c()}catch(e){console.warn("Erro ao carregar imagem:",e),l?(y(l),g(!1),p(!0)):(p(!1),g(!0),null==c||c())}}},[t,l,I,v,x,u,c]);(0,n.useEffect)(()=>{k()},[k]),(0,n.useEffect)(()=>{let e=setTimeout(()=>{h&&p(!1)},2e3);return()=>clearTimeout(e)},[h]);let j=(0,n.useCallback)(()=>{l&&b!==l?(y(l),g(!1),p(!0)):(p(!1),g(!0),null==c||c())},[l,b,c]),P=(0,n.useCallback)(()=>{I(b)||(p(!1),null==u||u())},[b,I,u]),z=(0,n.useCallback)(()=>{v(b)||j()},[b,v,j]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"relative ".concat(i),children:[h&&!I(b)&&(0,r.jsx)("div",{className:"absolute inset-0 bg-gray-200 dark:bg-gray-700 animate-pulse rounded-lg z-10",children:(0,r.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,r.jsx)("div",{className:"w-8 h-8 border-4 border-cyan-500 border-t-transparent rounded-full animate-spin"})})}),(0,r.jsx)("img",{src:b,alt:a,className:"".concat(i," opacity-100 ").concat(m?"cursor-pointer hover:opacity-90 transition-opacity":""),onLoad:P,onError:z,loading:"lazy",onClick:()=>{m&&b&&!f&&C(!0)}}),f&&(0,r.jsx)("div",{className:"absolute inset-0 bg-gray-100 dark:bg-gray-800 flex items-center justify-center rounded-lg z-20",children:(0,r.jsxs)("div",{className:"text-center text-gray-500 dark:text-gray-400",children:[(0,r.jsx)("svg",{className:"w-12 h-12 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,r.jsx)("p",{className:"text-sm",children:"Imagem n\xe3o dispon\xedvel"})]})}),d]}),(0,r.jsx)(s,{isOpen:w,imageSrc:b,imageAlt:a,onClose:()=>C(!1)})]})}},6059:function(e,t,a){a.d(t,{CartProvider:function(){return l},j:function(){return c},y:function(){return u}});var r=a(7437),n=a(2265),o=a(9493);let i=(0,n.createContext)(void 0),s="digital-menu-cart";function l(e){let{children:t}=e,[a,l]=(0,n.useState)([]),[c,u]=(0,n.useState)(!1),[d,m]=(0,n.useState)(!1);(0,n.useEffect)(()=>{try{let e=localStorage.getItem(s);if(e){let t=JSON.parse(e),a=Date.now()-t.timestamp<6048e5;if(t.items&&a){let e=t.items.map(o.j.serializableToItem);l(e)}else localStorage.removeItem(s)}}catch(e){console.warn("Erro ao carregar carrinho do localStorage:",e),localStorage.removeItem(s)}finally{m(!0)}},[]),(0,n.useEffect)(()=>{if(d)try{if(0===a.length)localStorage.removeItem(s);else{if(!o.j||"function"!=typeof o.j.itemToSerializable){console.error("CartUtils n\xe3o est\xe1 dispon\xedvel ou n\xe3o tem o m\xe9todo itemToSerializable");return}let e={items:a.map(e=>{try{return o.j.itemToSerializable(e)}catch(t){return console.error("Erro ao serializar item:",e,t),{id:e.id,dish:e.dish,selectedComplements:[],quantity:e.quantity,unitPrice:e.unitPrice,totalPrice:e.totalPrice}}}),timestamp:Date.now()};localStorage.setItem(s,JSON.stringify(e))}}catch(e){console.warn("Erro ao salvar carrinho no localStorage:",e)}},[a,d]);let h=a.reduce((e,t)=>e+t.quantity,0),p=a.reduce((e,t)=>e+t.totalPrice,0),f=(0,n.useCallback)((e,t)=>{let a=o.j.calculateUnitPrice(e,t),r=o.j.generateItemId(e,t);l(n=>{let i=n.findIndex(a=>o.j.areItemsIdentical(a.dish,a.selectedComplements,e,t));if(!(i>=0))return[...n,{id:r,dish:e,selectedComplements:new Map(t),quantity:1,unitPrice:a,totalPrice:a}];{let e=[...n],t=e[i],r=t.quantity+1;return e[i]={...t,quantity:r,totalPrice:a*r},e}}),console.log("Item adicionado ao carrinho: ".concat(e.name))},[]),g=(0,n.useCallback)(e=>{l(t=>t.filter(t=>t.id!==e))},[]),b=(0,n.useCallback)((e,t)=>{if(t<=0){g(e);return}l(a=>a.map(a=>a.id===e?{...a,quantity:t,totalPrice:a.unitPrice*t}:a))},[g]),y=(0,n.useCallback)(()=>{l([]),u(!1)},[]),w=(0,n.useCallback)(()=>{u(!0)},[]),C=(0,n.useCallback)(()=>{u(!1)},[]),I=(0,n.useCallback)(e=>{l(t=>t.map(t=>{if(t.id===e){let e=t.quantity+1;return{...t,quantity:e,totalPrice:t.unitPrice*e}}return t}))},[]),v=(0,n.useCallback)(e=>{l(t=>t.map(t=>{if(t.id===e){let e=Math.max(1,t.quantity-1);return{...t,quantity:e,totalPrice:t.unitPrice*e}}return t}))},[]);return(0,r.jsx)(i.Provider,{value:{items:a,totalItems:h,totalPrice:p,addItem:f,removeItem:g,updateQuantity:b,clearCart:y,isCartOpen:c,openCart:w,closeCart:C,incrementQuantity:I,decrementQuantity:v,isInitialized:d},children:t})}function c(){let e=(0,n.useContext)(i);if(void 0===e)throw Error("useCart must be used within a CartProvider");return e}function u(){let e=(0,n.useContext)(i);if(void 0===e)throw Error("useCartExtended must be used within a CartProvider");return{...e,incrementQuantity:e.incrementQuantity,decrementQuantity:e.decrementQuantity,isInitialized:e.isInitialized}}},5184:function(e,t,a){a.d(t,{jD:function(){return i},xr:function(){return s}});var r=a(2265),n=a(6059),o=a(9493);function i(){let e=(0,n.j)();if(!e)throw Error("useCart must be used within a CartProvider");let t=0===e.items.length,a=e.items.length>0,i=(0,r.useMemo)(()=>o.j.formatPrice(e.totalPrice),[e.totalPrice]),s=(0,r.useCallback)(t=>e.items.find(e=>e.id===t),[e.items]),l=(0,r.useCallback)((t,a)=>e.items.some(e=>o.j.areItemsIdentical(e.dish,e.selectedComplements,t,a)),[e.items]),c=(0,r.useCallback)((t,a)=>{let r=e.items.find(e=>o.j.areItemsIdentical(e.dish,e.selectedComplements,t,a));return(null==r?void 0:r.quantity)||0},[e.items]),u=(0,r.useMemo)(()=>({totalItems:e.totalItems,uniqueItems:e.items.length,totalPrice:e.totalPrice,formattedTotalPrice:i,isEmpty:t,hasItems:a}),[e.totalItems,e.items.length,e.totalPrice,i,t,a]);return{items:e.items,totalItems:e.totalItems,totalPrice:e.totalPrice,formattedTotalPrice:i,isEmpty:t,hasItems:a,stats:u,isCartOpen:e.isCartOpen,openCart:e.openCart,closeCart:e.closeCart,addItem:e.addItem,removeItem:e.removeItem,updateQuantity:e.updateQuantity,clearCart:e.clearCart,getItem:s,isItemInCart:l,getItemQuantity:c}}function s(){let e=i(),t=(0,n.y)(),a=(0,r.useCallback)(e=>{t.incrementQuantity(e)},[t]),o=(0,r.useCallback)(e=>{t.decrementQuantity(e)},[t]),s=(0,r.useCallback)(function(t,a){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;for(let n=0;n<r;n++)e.addItem(t,a)},[e]),l=(0,r.useCallback)(t=>e.items.filter(e=>e.dish.category===t||e.dish.categories.includes(t)).reduce((e,t)=>e+t.totalPrice,0),[e.items]),c=(0,r.useCallback)(t=>e.items.filter(e=>e.dish.category===t||e.dish.categories.includes(t)),[e.items]),u=(0,r.useCallback)(t=>!!window.confirm(t||"Tem certeza que deseja limpar o carrinho?")&&(e.clearCart(),!0),[e]),d=(0,r.useCallback)(()=>{let t=new Map;return e.items.forEach(e=>{e.selectedComplements.forEach(a=>{a.forEach(a=>{t.set(a,(t.get(a)||0)+e.quantity)})})}),Array.from(t.entries()).sort((e,t)=>t[1]-e[1]).slice(0,5)},[e.items]);return{...e,isInitialized:t.isInitialized,incrementQuantity:a,decrementQuantity:o,addItemWithQuantity:s,getTotalByCategory:l,getItemsByCategory:c,getComplementsAnalysis:d,clearCartWithConfirmation:u}}},5042:function(e,t,a){a.d(t,{K:function(){return i},i:function(){return s}});var r=a(2265);class n{async preloadImage(e){if(this.loadingPromises.has(e))return this.loadingPromises.get(e);if(this.cache.has(e)&&this.cache.get(e).loaded)return!0;let t=new Promise(t=>{let a=new Image;a.onload=()=>{this.cache.set(e,{src:e,element:a,loaded:!0,error:!1}),this.loadingPromises.delete(e),t(!0)},a.onerror=()=>{this.cache.set(e,{src:e,element:a,loaded:!1,error:!0}),this.loadingPromises.delete(e),t(!1)},a.src=e});return this.loadingPromises.set(e,t),t}isImageLoaded(e){return this.cache.has(e)&&this.cache.get(e).loaded}isImageError(e){return this.cache.has(e)&&this.cache.get(e).error}getCachedImage(e){return this.cache.get(e)}clearCache(){this.cache.clear(),this.loadingPromises.clear()}async preloadImages(e){let t=e.map(e=>this.preloadImage(e));await Promise.allSettled(t)}constructor(){this.cache=new Map,this.loadingPromises=new Map}}let o=new n;function i(){let[e,t]=(0,r.useState)(!1),a=(0,r.useRef)(o),n=(0,r.useCallback)(async e=>await a.current.preloadImage(e),[]),i=(0,r.useCallback)(async e=>{await a.current.preloadImages(e)},[]),s=(0,r.useCallback)(e=>a.current.isImageLoaded(e),[]);return{preloadImage:n,preloadImages:i,isImageLoaded:s,isImageError:(0,r.useCallback)(e=>a.current.isImageError(e),[]),getCachedImage:(0,r.useCallback)(e=>a.current.getCachedImage(e),[]),clearCache:(0,r.useCallback)(()=>{a.current.clearCache()},[]),cacheReady:e}}function s(e){let{preloadImages:t,isImageLoaded:a}=i(),[n,o]=(0,r.useState)(0);(0,r.useEffect)(()=>{if(0===e.length)return;let a=e.map(e=>e.image).filter(Boolean);0!==a.length&&(async()=>{try{await t(a),o(a.length)}catch(e){console.warn("Erro ao pr\xe9-carregar imagens:",e)}})()},[e,t]);let s=(0,r.useCallback)(()=>0===e.length?0:n/e.length*100,[e.length,n]);return{preloadedCount:n,totalImages:e.length,preloadProgress:s(),isImageLoaded:a}}},8783:function(e,t,a){a.d(t,{y:function(){return n}});var r=a(2265);function n(e){(0,r.useEffect)(()=>{if(!e)return;let t=window.scrollY,a=window.scrollX;return document.documentElement.classList.add("modal-open"),document.body.classList.add("modal-open"),document.body.style.top="-".concat(t,"px"),document.body.style.left="-".concat(a,"px"),()=>{document.documentElement.classList.remove("modal-open"),document.body.classList.remove("modal-open"),document.body.style.top="",document.body.style.left="",requestAnimationFrame(()=>{window.scrollTo({left:a,top:t,behavior:"instant"})})}},[e])}},9435:function(e,t,a){a.d(t,{r:function(){return n}});var r=a(2265);function n(e){let[t,a]=(0,r.useState)({phoneNumber:"",enabled:!1,customMessage:"Ol\xe1! Gostaria de fazer este pedido."}),[n,o]=(0,r.useState)(!1),[i,s]=(0,r.useState)(null);return(0,r.useEffect)(()=>{(async()=>{if(!e||"default"===e){a(e=>({...e,enabled:!1}));return}o(!0),s(null);try{let t="https://wulazaggdihidadkhilg.supabase.co",r="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Ind1bGF6YWdnZGloaWRhZGtoaWxnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ0NzkxODQsImV4cCI6MjA3MDA1NTE4NH0.MxXnFZAUoMPCy9LJFTWv_6-X_8AmLr553wrAhoeRrOQ";if(!t||!r){console.warn("Configura\xe7\xe3o do Supabase n\xe3o encontrada - WhatsApp indispon\xedvel"),a(e=>({...e,enabled:!1}));return}let n=await fetch("".concat(t,"/rest/v1/restaurants?slug=eq.").concat(encodeURIComponent(e),"&select=whatsapp_phone,whatsapp_enabled,whatsapp_custom_message"),{headers:{apikey:r,Authorization:"Bearer ".concat(r),"Content-Type":"application/json"}}),o=null;if(n.ok||(n=await fetch("".concat(t,"/rest/v1/restaurants?id=eq.").concat(encodeURIComponent(e),"&select=whatsapp_phone,whatsapp_enabled,whatsapp_custom_message"),{headers:{apikey:r,Authorization:"Bearer ".concat(r),"Content-Type":"application/json"}})),!n.ok)throw Error("Erro ao buscar configura\xe7\xe3o do WhatsApp");if((o=await n.json())&&o.length>0){let e=o[0];e.whatsapp_phone&&""!==e.whatsapp_phone.trim()?a({phoneNumber:e.whatsapp_phone,enabled:!1!==e.whatsapp_enabled,customMessage:e.whatsapp_custom_message||"Ol\xe1! Gostaria de fazer este pedido."}):a({phoneNumber:"",enabled:!1,customMessage:"Ol\xe1! Gostaria de fazer este pedido."})}else a({phoneNumber:"",enabled:!1,customMessage:"Ol\xe1! Gostaria de fazer este pedido."})}catch(e){console.error("Erro ao carregar configura\xe7\xe3o do WhatsApp:",e),s("Erro ao carregar configura\xe7\xe3o"),a({phoneNumber:"",enabled:!1,customMessage:"Ol\xe1! Gostaria de fazer este pedido."})}finally{o(!1)}})()},[e]),{config:t,isLoading:n,error:i,updateConfig:async t=>{if(!e||"default"===e){console.warn("N\xe3o \xe9 poss\xedvel atualizar configura\xe7\xe3o para restaurantId padr\xe3o");return}a(e=>({...e,...t}));try{let a="https://wulazaggdihidadkhilg.supabase.co",r="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Ind1bGF6YWdnZGloaWRhZGtoaWxnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ0NzkxODQsImV4cCI6MjA3MDA1NTE4NH0.MxXnFZAUoMPCy9LJFTWv_6-X_8AmLr553wrAhoeRrOQ";if(!a||!r){console.warn("Configura\xe7\xe3o do Supabase n\xe3o encontrada - n\xe3o \xe9 poss\xedvel salvar configura\xe7\xe3o");return}let n={};if(void 0!==t.phoneNumber&&(n.whatsapp_phone=t.phoneNumber),void 0!==t.enabled&&(n.whatsapp_enabled=t.enabled),void 0!==t.customMessage&&(n.whatsapp_custom_message=t.customMessage),!(await fetch("".concat(a,"/rest/v1/restaurants?id=eq.").concat(e),{method:"PATCH",headers:{apikey:r,Authorization:"Bearer ".concat(r),"Content-Type":"application/json",Prefer:"return=minimal"},body:JSON.stringify(n)})).ok)throw Error("Erro ao salvar configura\xe7\xe3o do WhatsApp")}catch(e){console.error("Erro ao salvar configura\xe7\xe3o do WhatsApp:",e),s("Erro ao salvar configura\xe7\xe3o")}},clearError:()=>s(null)}}},9493:function(e,t,a){a.d(t,{j:function(){return r}});class r{static mapToSerializable(e){return Array.from(e.entries()).map(e=>{let[t,a]=e;return[t,Array.from(a)]})}static serializableToMap(e){return new Map(e.map(e=>{let[t,a]=e;return[t,new Set(a)]}))}static itemToSerializable(e){return{id:e.id,dish:e.dish,selectedComplements:this.mapToSerializable(e.selectedComplements),quantity:e.quantity,unitPrice:e.unitPrice,totalPrice:e.totalPrice}}static serializableToItem(e){return{id:e.id,dish:e.dish,selectedComplements:this.serializableToMap(e.selectedComplements),quantity:e.quantity,unitPrice:e.unitPrice,totalPrice:e.totalPrice}}static calculateUnitPrice(e,t){let a=parseFloat(e.price.replace(",","."));return t.forEach((t,r)=>{var n;let o=null===(n=e.complement_groups)||void 0===n?void 0:n.find(e=>e.title===r);o&&t.forEach(e=>{let t=o.complements.find(t=>t.name===e);t&&(a+=parseFloat(t.price.replace(",",".")))})}),a}static generateItemId(e,t){let a=Array.from(t.entries()).map(e=>{let[t,a]=e;return"".concat(t,":").concat(Array.from(a).sort().join(","))}).sort().join("|");return"".concat(e.name,"-").concat(a).replace(/[^a-zA-Z0-9-_]/g,"_")}static areItemsIdentical(e,t,a,r){if(e.name!==a.name||t.size!==r.size)return!1;for(let[e,a]of t.entries()){let t=r.get(e);if(!t||a.size!==t.size)return!1;for(let e of a)if(!t.has(e))return!1}return!0}static formatPrice(e){return e.toFixed(2).replace(".",",")}static hasRequiredComplementsWithPrice(e){return!!e.complement_groups&&0!==e.complement_groups.length&&e.complement_groups.some(e=>!!e.required&&e.complements.some(e=>parseFloat(e.price.replace(",","."))>0))}}}}]);